import pandas as pd
from sklearn.feature_extraction.text import TfidfVectorizer
import pickle
from sanitization import sanitization  # Importing the sanitization function from the separate module

# Load the dataset
url = './Dataset/data_url.csv'  # Replace with your data file path
url_df = pd.read_csv(url)

# Separate the data according to its characteristics
urls = url_df.iloc[:, 0]  # URLs

# Vectorize the data using TfidfVectorizer
vectorizer = TfidfVectorizer(tokenizer=sanitization)
x = vectorizer.fit_transform(urls)

# Save the vectorizer using pickle
with open('./Classifier/pickel_vector.pkl', 'wb') as vectorizer_file:
    pickle.dump(vectorizer, vectorizer_file)

print("Vectorizer saved successfully.")
